<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="utf-8">
  <title>Médiá – Web File Storager</title>
  <style>
    body {font-family: system-ui, sans-serif; padding:2rem; max-width:1200px; margin:auto;}
    form{margin-bottom:2rem;}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1rem;}
    .thumb{width:100%;height:150px;object-fit:cover;border-radius:6px;box-shadow:0 2px 4px #0002;}
    .name{font-size:.85rem;word-break:break-all;margin-top:.3rem;text-align:center;}
  </style>
</head>
<body>
  <h1>Médiá v <code>/data</code></h1>

  <!-- Upload -->
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.file }} 
    <button type="submit">Nahrať</button>
  </form>

  <!-- Galéria / Zoznam -->
  <div class="grid">
    {% for m in media %}
      <div>
        <a href="{{ m.url }}" target="_blank" title="Otvoriť v novom okne">
          {% if m.type == "image" %}
            <img src="{{ m.url }}" alt="{{ m.name }}" class="thumb">
          {% else %}
            <div class="thumb" style="display:flex;align-items:center;justify-content:center;background:#f0f0f0;">
              {% if m.type == "video" %}🎞️{% else %}📄{% endif %}
            </div>
          {% endif %}
        </a>
        <div class="name">{{ m.name }}</div>
      </div>
    {% empty %}
      <p><em>V adresári /data sa nenašli žiadne podporované súbory.</em></p>
    {% endfor %}
  </div>
</body>
</html>
